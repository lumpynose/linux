=============================================
For hp stream replace SDX with mmcblk0
For ms surface replacd SDX with nvme0n1
For hp stream replace WIFI with wlan0
For ms surface replace WIFI with wlp1s0
==============================================

// The pound sign is root's prompt; type or copy+paste whatever's after it.
// Lines flush left after a root prompt line you copy and paste or type.
// Stuff after // is comments

// Verify network is working
  # ip addr

  # passwd root
secret

// If you have a wired connection.

  # systemctl start sshd.service

// Now connect to system with putty.

  # timedatectl set-ntp true

// Get list of disks.
  # lsblk

// For hp stream replace SDX with mmcblk0
// For ms surface replacd SDX with nvme0n1

  # gdisk /dev/SDX
o // wipes partition table
n return, +260M, ef00 // efi partition
n return, return, return // 8300, linux partition
w

  # mkfs.fat -F32 /dev/SDXp1
  # mkfs.ext4 /dev/SDXp2

  # mount /dev/SDXp2 /mnt
  # mkdir /mnt/boot
  # mount /dev/SDXp1 /mnt/boot

  # dd if=/dev/zero of=/mnt/swapfile bs=1M count=512 status=progress
  # chmod 600 /mnt/swapfile
  # mkswap /mnt/swapfile
  # swapon /mnt/swapfile

  # pacstrap /mnt base linux linux-firmware

  # genfstab -U /mnt >> /mnt/etc/fstab

// Add/fix swap file in fstab if not there (genfstab added it):
  # emacs /mnt/etc/fstab
/swapfile none swap defaults 0 0

  # arch-chroot /mnt

  # pacman -S emacs-nox vim emacs hwinfo e2fsprogs dosfstools man-db man-pages
  # pacman -S texinfo upower acpi grub efibootmgr intel-ucode
  # pacman -S wpa_supplicant dhcpcd systemd-resolvconf ntp openssh iproute2
// Choose systemd-resolvconf if asked?

  # ln -sf /usr/share/zoneinfo/US/Pacific /etc/localtime
  # hwclock --systohc

// Uncomment two lines for en_US
  # emacs /etc/locale.gen

// Generate locale files
  # locale-gen

// Edit /etc/locale.conf and add LANG=en_US.UTF-8
  # emacs /etc/locale.conf
LANG=en_US.UTF-8

// Edit /etc/vconsole.conf and add FONT=latarcyrheb-sun32 for a bigger console font
// and add KEYMAP.
  # emacs /etc/vconsole.conf
KEYMAP=en-latin1
FONT=latarcyrheb-sun32

// Edit /etc/hostname and add archlinux.objecteffects.com
  # emacs /etc/hostname
archlinux.objecteffects.com

// Edit /etc/hosts and add localhost and this machine.
  # emacs /etc/hosts
127.0.0.1	localhost
::1		localhost
127.0.0.1	archlinux.objecteffects.com archlinux

  # grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=GRUB
  # grub-mkconfig -o /boot/grub/grub.cfg

// Edit sshd_config and add root login
  # emacs /etc/ssh/sshd_config
PermitRootLogin yes

  # passwd root
secret

  # systemctl enable sshd.service
  # systemctl enable systemd-resolved.service
  # systemctl enable systemd-networkd.service

// For hp stream replace WIFI with wlan0
// For ms surface replace WIFI with wlp1s0

  # systemctl enable wpa_supplicant@WIFI.service

// set up wpa_cli and to allow wpa_supplicant to edit the
// config file.
  # emacs /etc/wpa_supplicant/wpa_supplicant.conf
ctrl_interface=/run/wpa_supplicant
update_config=1

// start wpa_supplicant
  # wpa_supplicant -B -i WIFI -c /etc/wpa_supplicant/wpa_supplicant.conf

// Edit the wpa_supplicant.conf with your settings.
  # wpa_cli -i WIFI
scan
scan_results
add_network
set_network 0 ssid "my ssid"
set_network 0 psk "my wifi passphrase"
enable_network 0
save_config
quit

// Instead of using wpa_cli you can do it all in one go if you know
// your wifi's SSID:
wpa_passphrase "my ssid" "my wifi passphrase" >> /etc/wpa_supplicant/wpa_supplicant.conf
 
// For hp stream replace WIRED with enp0s20u1
// For ms surface replace WIRED with enp0s20f0u1u2

  # emacs /etc/systemd/network/20-wired.network 
[Match]
Name=WIRED

[Network]
DHCP=yes

[DHCP]
RouteMetric=10

// For hp stream replace WIFI with wlan0
// For ms surface replace WIFI with wlp1s0

  # emacs /etc/systemd/network/25-wireless.network 
[Match]
Name=WIFI

[Network]
DHCP=yes

[DHCP]
RouteMetric=20

  # exit
  # umount /mnt/boot
  # swapoff /mnt/swapfile
  # umount /mnt

  # reboot


// Wheel needed for su permission.
  # useradd -m -G users,wheel rusty

// Random stuff

// Update weekly: pacman -Syu
// Check for orphaned packages: pacman -Qtd
// Check for failed services: systemctl --failed
// Check for errors in the log files: journalctl -p 3 -xb

// ethernet: enp0s20f0u1u2
// display: 1920x1280@60Hz
// display: 800x600x32
// grub command videoinfo
// grub command vbeinfo

// ipup
// dhcpcd
// systemctl start sshd
